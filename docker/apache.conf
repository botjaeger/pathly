<VirtualHost *:80>
    DocumentRoot /var/www/public

    <Directory /var/www/public>
        AllowOverride None
        Order Allow,Deny
        Allow from All

        <IfModule mod_rewrite.c>
            RewriteEngine On

            # Sets the HTTP_AUTHORIZATION header removed by Apache
            RewriteCond %{HTTP:Authorization} .+
            RewriteRule ^ - [E=HTTP_AUTHORIZATION:%0]

            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteRule ^(.*)$ index.php [QSA,L]
        </IfModule>
    </Directory>

    # Increase request limits
    LimitRequestLine 16384
    LimitRequestFieldSize 16384

    # Increase request body size limit to 100MB
    LimitRequestBody 104857600

    # Timeout settings
    Timeout 300

    # Enable handling large files
    <IfModule mod_reqtimeout.c>
        RequestReadTimeout header=60 body=300
    </IfModule>
</VirtualHost>
